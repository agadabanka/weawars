/***********************************************************************	Author: Amith Tudur 	This file is part of Weawars.    Weawars is free software: you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation, either version 3 of the License, or    (at your option) any later version.    Weawars is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.    You should have received a copy of the GNU General Public License    along with Weawars.  If not, see <http://www.gnu.org/licenses/>.***********************************************************************/package  {	import flash.display.*;	import Field;	import DashBoard;	import Player;	import Creature;	import Waves;	public class Game extends MovieClip{		public var grid_m:Number 		= 20;		public var grid_n:Number 		= 20;		public var grid_size:Number		= 20;		public static const WON			= 0;		public static const LOST		= 1;		public var field:Field			= null;		public var dashBoard:DashBoard	= null;		public var player:Player		= null;		public var waves:Waves			= null;				public function Game(l_stage:Stage) {			reset( l_stage );		}		public function reset( l_stage:Stage ){			field 	  = new Field( this, l_stage ); 	//setup the field for play			addChild( field );			waves	  = new Waves( this, 4 ); 			//sends out 4 waves of monsters			dashBoard = new DashBoard( this, l_stage );	//all the UI components go here			addChild( dashBoard );			player	  = new Player( this );				//has all the player details					}				public function beginAttack( ){		//the game begins on pressing 'START' ( DashBoard.as )			waves.beginAttack( );		}						public function gameover( stat:Boolean ){	//the game ends if all the waves are up			if( stat == LOST ){						//or if the player has lost all the health								waves.endAttack( );			}else if( stat == WON ){				//show the necessary message for win - a pop up window?				dashBoard.healthBox.update( Player.MAXHEALTH+1 );			}			//show the statistics		}				public function restart( ){			field.reset( );			waves.reset( );			player.reset( );		}	}}