package{	import flash.display.*;	import flash.geom.Point;	import Field;	import Waves;	import DboardTex;		public class DashBoard extends Sprite{		private var purchasexy:Point;  		private var startxy:Point;	 		private var moneyxy:Point;		private var healthxy:Point;		public var field:Field;		public var waves:Waves;		public var game:Game;		private var stage_v:Stage;		public var moneyBox:MoneyBox;		public var healthBox:HealthBox;				public function DashBoard( l_game:Game, l_stage:Stage) {			game		= l_game;			stage_v		= l_stage;			field 		= game.field;			waves		= game.waves;						var bg 		= new DboardTex( );			bg.x		= field.grid_m*field.grid_size;			bg.y		= 0;			bg.width	= stage_v.stageWidth - bg.x;			bg.height	= stage_v.stageHeight;			addChild( bg );			purchasexy	= new Point(field.grid_m*field.grid_size+field.grid_size, field.grid_n*field.grid_size-2*field.grid_size);			startxy		= new Point( purchasexy.x, purchasexy.y - 25 ); //25 assumed to be the button size.			moneyxy		= new Point( purchasexy.x, startxy.y - 25);			healthxy	= new Point( purchasexy.x, moneyxy.y - 25);			var purchasebtn = new PurchaseButton( this, purchasexy 	  ); //adds the button as well					var startbtn	= new StartButton	( this, startxy		  );			moneyBox		= new MoneyBox		( this, moneyxy 	  );			healthBox		= new HealthBox		( this, healthxy 	  );		}			}	}import fl.controls.Button;import flash.geom.Point;import flash.events.*;import flash.text.*;import flash.display.*;import Waves;import Field;class PurchaseButton extends Sprite{	private var field:Field;	private var btn:Button;	private var dboard:DashBoard;		public function PurchaseButton( l_dboard:DashBoard, xy:Point ){		dboard= l_dboard;		field = dboard.field;		btn = new Button( )		btn.x = xy.x;		btn.y = xy.y		btn.label  = "Buy Tower $10";		btn.setStyle( "textFormat", new TextFormat( "Comic Sans MS")) ;		btn.addEventListener( MouseEvent.CLICK, addTower, false, 0, true );		addChild(btn);		dboard.addChild(this);	}		private function addTower( eve:MouseEvent ){		if( field.fieldmode == Field.PLACEMENT ||		   	field.fieldmode == Field.COMBAT )			field.addTower( );	}}class StartButton extends Sprite{	private var waves:Waves;	private var field:Field;	private var btn:Button;	private var dboard:DashBoard;		public function StartButton( l_dboard:DashBoard, xy:Point ){		dboard 	 = l_dboard;		waves 	 = dboard.waves;		field	 = dboard.field;		btn 	 = new Button( );				btn.x = xy.x;		btn.y = xy.y		btn.label  = "Start!";		btn.setStyle( "textFormat", new TextFormat( "Comic Sans MS")) ;		btn.addEventListener( MouseEvent.CLICK, beginAttack, false, 0, true );		addChild(btn);		dboard.addChild(this);	}		private function beginAttack( eve:MouseEvent ){		waves.beginAttack( );	}}class MoneyBox extends Sprite{	private var moneylabel:TextField;		public function MoneyBox( dboard:DashBoard, xy:Point ){		moneylabel 				= new TextField();		moneylabel.autoSize		= TextFieldAutoSize.LEFT;		moneylabel.background 	= true;		moneylabel.border 		= true;				moneylabel.x = xy.x;		moneylabel.y = xy.y;				var format:TextFormat = new TextFormat();		format.font 		  = "Comic Sans MS";		format.color 		  = 0xFF0000;		format.size 		  = 10;		format.underline 	  = false;				moneylabel.defaultTextFormat = format;			addChild(moneylabel);		dboard.addChild( this );	}		public function update( money:Number ){		moneylabel.text = '$'+ money.toString( );	}}class HealthBox extends Sprite{	private var healthlabel:TextField;		public function HealthBox( dboard:DashBoard, xy:Point ){		healthlabel 				= new TextField();		healthlabel.autoSize		= TextFieldAutoSize.LEFT;		healthlabel.background 	= true;		healthlabel.border 		= true;				healthlabel.x = xy.x;		healthlabel.y = xy.y;				var format:TextFormat = new TextFormat();		format.font 		  = "Comic Sans MS";		format.color 		  = 0x000099;		format.size 		  = 10;		format.underline 	  = false;				healthlabel.defaultTextFormat = format;			addChild(healthlabel);		dboard.addChild( this );	}		public function update( health:Number ){		if( health <= 0 ){			healthlabel.text = 'Game Over';		}else if( health > 5 ){	// a temp hack to display win.			healthlabel.text = 'Congrats! You Won!'		}else{			healthlabel.text = 'Lives: '+ health.toString( );		}	}		}