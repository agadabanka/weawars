/***********************************************************************	Author: Amith Tudur 	This file is part of Weawars.    Weawars is free software: you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation, either version 3 of the License, or    (at your option) any later version.    Weawars is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.    You should have received a copy of the GNU General Public License    along with Weawars.  If not, see <http://www.gnu.org/licenses/>.***********************************************************************/package  {	import Game;	import Monsters;	import Field;		public class Waves {		private var _game:Game;		private var _maxwaves:Number;		private var _nwave:Number;		private var _nround:Array;		public  var monsters:Monsters;		public static var MAXWAVES:Number;				public function Waves( game:Game, maxwaves:Number ) {			_game 		= game;			_maxwaves	= maxwaves;			MAXWAVES	= _maxwaves;			_nround		= [ 6, 16, 30, 50 ];			reset( );		}				public function reset( ){			if( monsters ){				monsters.removeFromField( );			}			_nwave		= 0;			if( _game.dashBoard ){				_game.dashBoard.waveBox.update( _maxwaves );			}			monsters  = new Monsters(this, _game, _nround[_nwave]);			_game.addChild( monsters );			_game.field.setMonsters( monsters );		}				public function nextWave( ){			if( _nwave < (_maxwaves-1) ){				_nwave++;				_game.dashBoard.waveBox.update( _maxwaves - _nwave );					monsters  = new Monsters(this, _game, _nround[_nwave]);				_game.addChild( monsters );				_game.field.setMonsters( monsters );				beginAttack( );			}else{				_game.gameover( Game.WON ); //gameover - the player has won			}		}				public function beginAttack( ){			_game.field.fieldmode = Field.COMBAT;			_game.field.enableTowerResponse( );			monsters.addToField( );		}				public function endAttack( ){	 //happens only on game over. 			monsters.removeFromField( ); //else all monsters will be removed for the next wave to begin.			_game.field.disableTowerResponse( );			_game.field.fieldmode = Field.NOCHANGE;		}	}	}