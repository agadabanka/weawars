package{	import Creature;	import Field;	import flash.display.*;	import flash.events.Event;	import flash.utils.*;		public class Monsters extends Sprite{		private var num:int; //number of monsters		public  var monsters:Array;		private var monstersAdded:int;		private static const DEAD:int  = 0;		private static const ALIVE:int = 1;		private static const STORE:int = 2;		private var grid_m:Number, grid_n:Number,					grid_size:Number;		private var field:Field;		private var game:Game;		private static const spawnMinTime = 500; //ms		private static const spawnMaxTime = 1000; //ms		private var spawnTimer:Timer;				public function Monsters(l_game:Game, l_num:int ){			var i:int, spx:Number, spy:Number,				epx:Number, epy:Number, dir:int;			game			= l_game;			grid_m			= game.grid_m;			grid_n			= game.grid_n;			grid_size		= game.grid_size;			field			= game.field;						monsters 		= new Array( );			monstersAdded	= 0;			num 			= l_num;			for( i=0; i<num; i++ ){				if( i < num/2 ){ //spawn along the [x] direction					dir = 1;					spx = field.begin_x;					spy = field.begin_y+ (grid_n/2*grid_size + choice(-1,1)*grid_size);					epx = field.begin_x+ ((grid_m)*grid_size);					epy = spy;				}else{	//spawn along the [y] direction					dir = 0;					spy = field.begin_y;					spx = field.begin_x+ (grid_m/2*grid_size + choice(-1,1)*grid_size);					epx = spx;					epy = field.begin_y+ ((grid_n)*grid_size);				}				monsters.push( new Creature( spx, spy,epx, epy, dir, 'monster-'+i) );				addChild( monsters[i] );			}		}				public function addToField( ){			spawnTimer = new Timer( choice(spawnMinTime,spawnMaxTime)); //delay between .5 to 1 sec			spawnTimer.addEventListener("timer", introduce, false, 0, true );			spawnTimer.start();		}				private function introduce( eve:Event ){			do{				if( monstersAdded >= num )					break;				var index:int = choice( 0, num-1 );			}while( !(monsters[index].creatureState == STORE) );			monsters[index].addToField( );			monstersAdded += 1;			if( monstersAdded >= num ){				removeEventListener( Event.ENTER_FRAME, introduce ); //done with introducing the monsters.				spawnTimer.stop( );			}else{				spawnTimer.stop( );				spawnTimer = new Timer(  choice(spawnMinTime,spawnMaxTime)); //delay between .5 to 1 sec				spawnTimer.addEventListener("timer", introduce, false, 0, true );				spawnTimer.start();			}		}				private function choice(low:Number=0, high:Number=1):Number		{  			return Math.floor(Math.random() * (1+high-low)) + low;		}	}	}